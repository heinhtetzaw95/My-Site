<html>
<head>
  <title> IP Information </title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>
  <input id="ip_input" type="text" > </imput>
  <button id="submit_button"> Submit </button>
  <div id="result"></div>
<script>
  var ip;
  var request = "http://ip-api.com/json/";
  $(document).ready(getResult(request));

  $("#submit_button").click(function(){
    ip = $("#ip_input").val();
    request = "http://ip-api.com/json/" + ip;
    getResult(request);
  });

  $("#ip_input").keypress(function (e) { if(e.which == 13) $("#submit_button").click(); });

  function getResult(link){

    $("#result").text("");
    $.getJSON(link, function(data) {

      if (ip == null || ip === ""){
        $("#result").append("<br /> Showing data for your current IP address. <br /><br />");
      }
      else {
        $("#result").append("<br /> Showing data for IP: " + ip + "<br /><br />");
      }

      $.each(data, function(k, v) {
        $("#result").append(k + "&nbsp: " + v + "<br />");
      });
    });
  };
</script>
</body>
</html>
